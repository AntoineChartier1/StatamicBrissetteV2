<div class="w-full min-h-full">
    <img
        src="{{ glide :src='assets_field'}}"
        alt="{{assets_field:alt}}"
        class="w-full [height:_clamp(20em,24vw,50vw)] object-cover"
    />

    <section class="[padding:_clamp(2em,5vw,5vw)_clamp(0.9em,6vw,6vw)_clamp(0.9em,2.2vw,6vw)]">
        <div>
            <h1 class=" [font-size:_clamp(2em,4vw,5vw)] [margin-bottom:_clamp(0.5em,0.5vw,1vw)] text-center"> {{les_sections.0.titre }} </h1>
            <p class=" [font-size:_clamp(0.9em,1.5vw,2vw)] [margin-bottom:_clamp(1em,0.8vw,1vw)] text-center">{{les_sections.0.texte }}</p>
        </div>
        

        <div class="flex flex-col md:flex-row gap-3 my-8 md:my-20">
            <div class="md:w-1/3 ">
                <div class="flex items-center gap-[_clamp(1em,2vw,3em)] my-5 underline [font-size:_clamp(1em,1.3vw,1.5em)]">
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="1.85em" height="1.85em" viewBox="0 0 19 12" fill="none"><path d="m17.989 10.264-4.12-4.055a.287.287 0 0 1 0-.403l4.12-3.945c.2-.192.55-.064.55.201v8c0 .266-.35.395-.55.202M1.269 1.861l4.12 3.945c.12.11.12.284 0 .403l-4.12 4.055c-.2.193-.55.064-.55-.201v-8c0-.266.35-.394.55-.202m4.81 5.062c.12-.119.34-.128.46 0l1.01.97c.6.458 1.32.687 2.06.687s1.51-.238 2.13-.723l.97-.934a.34.34 0 0 1 .46 0l4.03 3.964c.19.183.04.485-.23.485H2.289c-.28 0-.42-.302-.23-.485l4.03-3.964zM17.249.497c.28 0 .42.311.23.494l-6.43 6.17c-.82.623-2.01.623-2.78.037L1.789.99c-.19-.183-.05-.494.23-.494z" fill="#E73B44"/></svg></span>
                    <span> <a href="mailto:{{compagnieinfos:email}}" class="hover:text-black/60">{{compagnieinfos:email}}</a> </span>
                </div>
                <div class="flex gap-[_clamp(1em,2vw,3em)] my-5 [font-size:_clamp(1em,1.3vw,1.5em)]">
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="1.85em" height="1.85em" viewBox="0 0 16 14" fill="none"><path d="M11.028 13.599c-5.94 0-10.77-4.422-10.77-9.86 0-.63.07-1.28.21-1.912.14-.65.73-1.172 1.45-1.29l2.09-.349c.41-.073.81.174.9.55l.93 3.78c.08.348-.12.696-.47.824l-.62.22c-.08.027-.13.119-.1.192.68 1.812 2.23 3.222 4.22 3.835.08.028.17-.009.21-.082l.42-.796c.16-.303.52-.458.88-.385l4.03.842c.41.083.68.458.59.833l-.46 2.106c-.14.659-.7 1.171-1.41 1.309q-1.05.192-2.1.192z" fill="#E73B44"/></svg></span>
                    <span>
                        <a href="tel:{{compagnieinfos:telephone}}" class="hover:text-black/60">{{compagnieinfos:telephone}}</a><br />
                        {{compagnieinfos:telephone_montreal | substr(0, 9) }}
                        <a href="tel:{{compagnieinfos:numero_telephone_montreal}}" class="hover:text-black/60">{{compagnieinfos:telephone_montreal | substr(9) }}</a> 
                    </span>
                </div>
                <div class="flex gap-[_clamp(1em,2vw,3em)] my-5 [font-size:_clamp(1em,1.3vw,1.5em)]">
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="1.85em" height="1.85em" viewBox="0 0 15 17" fill="none"><path d="M6.82.083C3.37.46.77 3.305.95 6.482c.23 3.991 4.75 5.4 6.3 9.383.13.33.64.33.77 0 1.59-4.083 6.31-5.456 6.31-9.694 0-3.635-3.45-6.527-7.51-6.088m.81 7.982c-1.3 0-2.36-.97-2.36-2.16s1.06-2.16 2.36-2.16 2.36.97 2.36 2.16-1.06 2.16-2.36 2.16" fill="#E73B44"/></svg></span>
                    <span>
                        <a href="{{compagnieinfos:lien_adresse}}" target="_blank" class="hover:text-black/60">{{compagnieinfos:adresse}}</a>
                    </span>
                </div>
            </div>

            {{# {{ partial:forms }} #}}
            

            <div class="md:w-2/3 ">
                <form name="contact" id="myForm" netlify netlify-honeypot="user">
                <input type="hidden" name="subject" value="%{siteName} %{formName} (%{submissionId})" />
                <input type="hidden" name="langue" value="{{locale}}" />
                    
                    <div class="flex flex-col space-y-12">
                        {{les_sections.1}}
                        <div class="sm:flex sm:gap-[_clamp(1em,2vw,3em)] space-y-12 sm:space-y-0">
                            <div class="relative sm:w-full">
                                <label for="{{champs.0.champ_for}}" class="sr-only">{{champs.0.champ_label}}</label>
                                <input type="{{champs.0.champ_type}}" id="{{champs.0.champ_for}}" name="{{champs.0.champ_for}}" class="w-full px-4 py-2 border-b-[1px] border-dore focus:shadow-borderBoxForm focus:outline-none transition-opacity duration-300  focus:opacity-100 bg-inherit " />
                                <span class="absolute top-2 left-4 transition-opacity duration-300 opacity-50 focus:opacity-0 pointer-events-none">{{champs.0.champ_label}}</span>
                            </div>
                            <div class="relative sm:w-full">
                                <label for="{{champs.1.champ_for}}" class="sr-only">{{champs.1.champ_label}}</label>
                                <input type="{{champs.1.champ_type}}" id="{{champs.1.champ_for}}" name="{{champs.1.champ_for}}" class="w-full px-4 py-2 border-b-[1px] border-dore focus:shadow-borderBoxForm focus:outline-none transition-opacity duration-300 focus:opacity-100 bg-inherit " />
                                <span class="absolute top-2 left-4 transition-opacity duration-300 opacity-50 focus:opacity-0 pointer-events-none">{{champs.1.champ_label}}</span>
                            </div>
                        </div>
                        <div class="sm:flex sm:gap-[_clamp(1em,2vw,3em)] space-y-12 sm:space-y-0">
                            <div class="relative sm:w-full">
                                <label for="{{champs.2.champ_for}}" class="sr-only">{{champs.2.champ_label}}</label>
                                <input type="{{champs.2.champ_type}}" id="{{champs.2.champ_for}}" name="{{champs.2.champ_for}}" required class="w-full px-4 py-2 border-b-[1px] border-dore focus:shadow-borderBoxForm focus:outline-none transition-opacity duration-300 focus:opacity-100 bg-inherit " />
                                <span class="absolute top-2 left-4 transition-opacity duration-300 opacity-50 focus:opacity-0 pointer-events-none">{{champs.2.champ_label}}</span>
                            </div>
                            <div class="relative">
                                <label for="{{champs.3.champ_for}}" class="sr-only">{{champs.3.champ_label}}</label>
                                <input type="{{champs.3.champ_type}}" id="{{champs.3.champ_for}}" name="{{champs.3.champ_for}}" class="w-full px-4 py-2 border-b-[1px] border-dore focus:shadow-borderBoxForm focus:outline-none transition-opacity duration-300 focus:opacity-100 bg-inherit " />
                                <span class="absolute top-2 left-4 transition-opacity duration-300 opacity-50 focus:opacity-0 pointer-events-none">{{champs.3.champ_label}}</span>
                            </div>
                        </div>
                        <div class="relative">
                            <label for="{{champs.4.champ_for}}" class="sr-only">{{champs.4.champ_label}}</label>
                            <textarea id="contenu" name="contenu" class="w-full h-40 px-4 py-2 border-b-[1px] border-dore focus:shadow-borderBoxForm focus:outline-none transition-opacity duration-300 focus:opacity-100 bg-inherit"></textarea>
                            <span class="absolute top-2 left-4 transition-opacity duration-300 opacity-50 focus:opacity-0 pointer-events-none">{{champs.4.champ_label}}</span>
                        </div>
                        <div class="hidden"><input type="text" name="user"></div>
                        <button type="submit" class="bouton bg-rougeBrissette text-white sm:ml-auto">
                            {{bouton_label}} &nbsp;
                            <svg fill="#ffff" width="0px" height="0px" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg" >
                              <path class="fill-white" d="M8.29289 2.29289C8.68342 1.90237 9.31658 1.90237 9.70711 2.29289L14.2071 6.79289C14.5976 7.18342 14.5976 7.81658 14.2071 8.20711L9.70711 12.7071C9.31658 13.0976 8.68342 13.0976 8.29289 12.7071C7.90237 12.3166 7.90237 11.6834 8.29289 11.2929L11 8.5H1.5C0.947715 8.5 0.5 8.05228 0.5 7.5C0.5 6.94772 0.947715 6.5 1.5 6.5H11L8.29289 3.70711C7.90237 3.31658 7.90237 2.68342 8.29289 2.29289Z"/>
                            </svg>
                        </button>
                        {{/les_sections.1}}
                    </div>
                </form>
                
            </div>


        </div>

    </section>


</div>


<iframe src="https://snazzymaps.com/embed/605386" width="100%" height="600px" style="border:none;"></iframe>


<script>
    var locale = "{{ locale }}";
</script>

<script>
    document.getElementById('myForm').addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent the form from submitting normally
    
        // Get form data
        var formData = new FormData(e.target);
    
        // URL-encode form data
        var encodedFormData = new URLSearchParams(formData).toString();
    
        // Send form data to Netlify
        fetch('/', {
            method: 'POST',
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: encodedFormData
        })
        .then(response => {
            if (!response.ok) {
                // Handle error
                console.error('Form submission failed');
                return;
            }
    
            // Form submission was successful
            // Display success message in the correct language
            var successMessage = locale === 'default' ? '<p>Merci d\'avoir soumis une demande.</p>' : '<p>Thanks for filling out a request.</p>';
            document.getElementById('myForm').innerHTML = successMessage;
        })
        .catch(error => {
            // Handle error
            console.error('Form submission failed', error);
        });
    });
</script>


<script>
    document.querySelectorAll('input, textarea').forEach(function(inputField) {
        inputField.addEventListener('focus', function() {
            this.nextElementSibling.style.opacity = '0';
        });
    
        inputField.addEventListener('blur', function() {
            if (this.value === '') {
                this.nextElementSibling.style.opacity = '0.5';
            }
        });

            // Handle autofill
    inputField.addEventListener('input', function() {
        if (this.value !== '') {
            
            this.nextElementSibling.style.opacity = '0';
        }
    });
    });
</script>